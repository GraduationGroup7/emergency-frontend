(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{185:function(e,t,a){e.exports=a(250)},192:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),s=(a(192),a(15)),o=a(16),i=a(4),m=a(293),u=a(19),d=a(7),_=a.n(d),p=a(12),b={api:"https://api.bashar.rocks/api"},f=a(105),g=a.n(f),E=function(){var e=Object(p.a)(_.a.mark(function e(t,a,n,r){var c;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({method:t.toLowerCase(),url:"".concat(b.api,"/").concat(a),headers:{Accept:"*/*","Content-Type":r||"application/json",Authorization:localStorage.getItem("authToken")?"Bearer "+localStorage.getItem("authToken"):""},data:n});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","emergencies/".concat(t,"/notes"),{note:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","emergencies/".concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","emergencies/".concat(t,"/all"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","agent_emergency");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","chat_rooms/".concat(t,"/"),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(_.a.mark(function e(t){var a,n,r=arguments;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},n=new URLSearchParams(a).toString(),e.next=4,E("get","chat_rooms/".concat(t,"/messages?").concat(n));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(_.a.mark(function e(t){var a,n,r=arguments;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},n=new URLSearchParams(a).toString(),e.next=4,E("get","authorities/chat_rooms/".concat(t,"/?").concat(n));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","auth/customer/verify",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","admin/tables");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","auth/login",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","emergencies",t,"multipart/form-data");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","admin/backup");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","auth/customer/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","".concat(t,"/bulk_delete"),{ids:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","user");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g()({url:"".concat("https://api.bashar.rocks/api","/admin/get_backup/").concat(t),method:"GET",headers:{Authorization:localStorage.getItem("authToken")?"Bearer "+localStorage.getItem("authToken"):""},responseType:"blob"}).then(function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","backup.zip"),document.body.appendChild(a),a.click()});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("put",t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","emergencies/".concat(t,"/merge-able"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","emergency_types");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("get","".concat(t,"?").concat(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","authorities/chat_rooms",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","authorities/chat_rooms/".concat(t,"/message"),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","emergencies/".concat(t,"/assign_agents"),{agent_ids:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("post","emergencies/merge",{mainEmergencyId:t,emergencyIds:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(_.a.mark(function e(t,a){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("put","emergencies/".concat(t,"/"),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();function V(e){var t=e.tableName,a=e.setTableName,c=Object(o.g)(),l=Object(u.c)(function(e){return e.userInfo.value}),s=Object(n.useState)(),d=Object(i.a)(s,2),_=d[0],p=d[1];Object(n.useEffect)(function(){k().then(function(e){console.log(e.data.data),p(e.data.data)})},[]);var b=Object(n.useState)(!1),f=Object(i.a)(b,2);f[0],f[1],Object(o.f)().pathname.split("/")[1];return r.a.createElement("div",{className:"sidebar__container"},r.a.createElement("div",{className:"sidebar__main__content"},r.a.createElement("div",{className:"logo__container"},r.a.createElement("img",{className:"logo__image",src:"/Images/logo-svg.svg",alt:""}),r.a.createElement("div",{className:"logo__text"},"YARDIM")),r.a.createElement("div",{className:"username__container d-flex align-items-center"},r.a.createElement(m.a,{className:"username__avatar",bg:"primary"},l.name.split(" ")?l.name.split(" ")[0][0].toUpperCase():null),r.a.createElement("div",null,l.name)),r.a.createElement("div",{className:"page__section__container"},r.a.createElement("div",{className:"page__section__title"},"PAGES")),_?_.map(function(e,n){return r.a.createElement("div",{onClick:function(){a(e.model),c("/admin")},className:(t===e.model?"sidebar__link__active":"")+" sidebar__link d-flex",key:n},r.a.createElement("i",{className:"bi bi-circle sidebar__link__icon"}),r.a.createElement("div",null,"".concat(e.name)))}):null),r.a.createElement("div",{onClick:function(){return c("/")},className:"logout__area__container d-flex"},r.a.createElement("i",{className:"bi bi-box-arrow-right logout__icon"}),r.a.createElement("div",null,"Logout")))}var $=a(294);function J(){var e=Object(o.g)();return r.a.createElement("div",{className:"h-100"},r.a.createElement("div",{className:"h-100 w-100 d-flex align-items-center align-items-md-center p-3 justify-content-center"},r.a.createElement("div",{className:"d-block d-md-flex justify-content-between align-items-center w-100 px-4"},r.a.createElement("div",{className:"text-center text-md-start"},r.a.createElement("div",{style:{fontSize:"4rem",lineHeight:"3.25rem"}},"401"),r.a.createElement("div",{style:{fontSize:"1.75rem"},className:"mb-0"},"Unauthorized Access"),r.a.createElement("div",{style:{color:"rgba(0, 0, 0, 0.4)"},className:"mb-2"},"Looks like you tried to visit a page that is not allowed to be viewed at this device"),r.a.createElement($.a,{onClick:function(){return e("/")}},"Go Home")),r.a.createElement("img",{className:"d-none d-md-block",style:{width:"50vw"},src:"https://img.freepik.com/free-vector/401-error-unauthorized-concept-illustration_114360-5531.jpg?t=st=1656289225~exp=1656289825~hmac=a3fefae3fc774e8c9696af9aedac24ee29f3b8a7739477a5e0a9c1a04fbb03b4&w=1380",alt:""}))))}function K(){var e=Object(n.useState)("customers"),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"authority__container"},r.a.createElement(V,{tableName:a,setTableName:c}),r.a.createElement(o.a,{context:[a,c]})),r.a.createElement("div",{className:"d-block d-md-none"},r.a.createElement(J,null)))}var Q=a(295);function X(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"danger"},r.a.createElement(Q.a.Heading,null,"Permission Error!"),r.a.createElement("p",null,"You don't have permission to view that page, you can press the button below to Login or Register!"),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(s.b,{to:"/"},r.a.createElement($.a,{onClick:function(){},variant:"outline-danger"},"Authenticate me!")))))}var Z=a(317),ee=a(316);function te(){var e=Object(o.f)().pathname.split("/")[2];localStorage.getItem("authToken");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user__app__container"},r.a.createElement(o.a,null),r.a.createElement(Z.a,{bg:"light",expand:"lg",className:"user-bottom-navbar"},r.a.createElement(ee.a,{className:"navbar__item__container",id:"change-flex-to-row"},r.a.createElement(ee.a.Item,{className:(e?"":"nav__item__active")+" nav__item"},r.a.createElement(s.b,{to:"",className:"link__dark"},r.a.createElement("i",{className:(e?"bi-house":"bi-house-fill")+" bi  fa-lg"}))),r.a.createElement(ee.a.Item,{className:("chat"===e?"nav__item__active":"")+" nav__item"},r.a.createElement(s.b,{to:"chat",className:"link__dark"},r.a.createElement("i",{className:("chat"===e?"bi-chat-left-dots-fill":"bi-chat-left-dots")+" bi  fa-lg"}))),r.a.createElement(ee.a.Item,{className:("profile"===e?"nav__item__active":"")+" nav__item"},r.a.createElement(s.b,{to:"profile",className:"link__dark"},r.a.createElement("i",{className:"bi bi-person-circle fa-lg"}))),r.a.createElement(ee.a.Item,{className:("call-help"===e?"nav__item__active":"")+" nav__item"},r.a.createElement(s.b,{to:"report",className:"link__dark"},r.a.createElement("i",{className:"bi-upload bi  fa-lg"}))),r.a.createElement(ee.a.Item,{className:"nav__item"},r.a.createElement(s.b,{to:"/",className:"link__dark"},r.a.createElement("i",{className:"bi bi-box-arrow-right fa-lg"})))))," "),r.a.createElement("div",{className:"d-none d-md-block"},r.a.createElement(J,null)))}var ae=a(253);function ne(e){e.tableName;var t=e.setTableName,a=Object(o.g)(),c=Object(u.c)(function(e){return e.userInfo.value}),l=Object(n.useState)([{name:"Emergencies",path:"",icon:"bi bi-exclamation-circle"}]),d=Object(i.a)(l,2),_=d[0],p=(d[1],Object(n.useState)(!1)),b=Object(i.a)(p,2),f=b[0],g=b[1],E=Object(o.f)().pathname.split("/"),v=E[1];return r.a.createElement("div",{className:"sidebar__container"},r.a.createElement("div",{className:"sidebar__main__content"},r.a.createElement("div",{onClick:function(){return a("/authority")},className:"logo__container"},r.a.createElement("img",{className:"logo__image",src:"/Images/logo-svg.svg",alt:""}),r.a.createElement("div",{className:"logo__text"},"YARDIM")),r.a.createElement("div",{className:"username__container d-flex align-items-center"},r.a.createElement(m.a,{className:"username__avatar",bg:"primary"},c.name.split(" ")[0][0].toUpperCase()+c.name.split(" ")[1][0].toUpperCase()),r.a.createElement("div",null,c.name)),r.a.createElement("div",{className:"page__section__container"},r.a.createElement("div",{className:"page__section__title"},"PAGES")),_.map(function(e,n){return r.a.createElement("div",{onClick:function(){t("emergencies"),a("/authority")},className:(e.path===v||""===e.path&&"authority"===v&&!E[2]?"sidebar__link__active":"")+" sidebar__link d-flex",key:n},r.a.createElement("i",{className:e.icon+" sidebar__link__icon"}),r.a.createElement("div",null,"".concat(e.name)))}),r.a.createElement("div",{className:"page__section__container"},r.a.createElement("div",{className:"page__section__title"},"AGENT OPERATIONS")),r.a.createElement("div",{onClick:function(){return g(!f)},"aria-expanded":f,"aria-controls":"sidebar__agents__collapse",className:(f?"sidebar__link__collapse__toggle__open":"")+" sidebar__link d-flex align-items-center"},r.a.createElement("i",{className:"bi bi-exclamation-circle sidebar__link__icon"}),r.a.createElement("div",null,"Agents"),r.a.createElement("i",{className:(f?"side__link__arrow__open ":"side__link__arrow__closed ")+"bi bi-chevron-right sidebar__link__icon side__link__arrow"})),r.a.createElement("div",{className:"sidebar__link__collapse"},r.a.createElement(ae.a,{in:f},r.a.createElement("div",{id:"sidebar__agents__collapse"},r.a.createElement(s.b,{to:"form/agents/create_form",className:"sidebar__link d-flex align-items-center"},r.a.createElement("i",{className:"bi bi-circle sidebar__link__icon__circle"}),r.a.createElement("div",null,"Create Agent")),r.a.createElement("div",{onClick:function(){t("agents"),a("/authority")},className:"sidebar__link d-flex align-items-center"},r.a.createElement("i",{className:"bi bi-circle sidebar__link__icon__circle"}),r.a.createElement("div",null,"All Agents"))))),r.a.createElement("div",{className:"page__section__container"},r.a.createElement("div",{className:"page__section__title"},"CHATS")),r.a.createElement("div",{onClick:function(){a("chatList")},className:("chatList"===E[2]?"sidebar__link__active":"")+" sidebar__link d-flex align-items-center"},r.a.createElement("i",{style:{fontSize:"18px"},className:"bi bi-chat-dots sidebar__link__icon__circle"}),"Chat")),r.a.createElement("div",{onClick:function(){return a("/")},className:"logout__area__container d-flex"},r.a.createElement("i",{className:"bi bi-box-arrow-right logout__icon"}),r.a.createElement("div",null,"Logout")))}function re(){var e=Object(n.useState)("emergencies"),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"authority__container"},r.a.createElement(ne,{tableName:a,setTableName:c}),r.a.createElement(o.a,{context:[a,c]})),r.a.createElement("div",{className:"d-block d-md-none"},r.a.createElement(J,null)))}var ce,le=a(315),se=a(8),oe=a(66),ie=Object(oe.b)({name:"userInfo",initialState:{value:{}},reducers:{updateUser:function(e,t){e.value=Object(se.a)({},e.value,t.payload)},replaceUser:function(e,t){e.value=t.payload}}}),me=ie.actions,ue=me.updateUser,de=me.replaceUser,_e=ie.reducer,pe=Object(oe.b)({name:"errorInfo",initialState:{value:{}},reducers:{updateError:function(e,t){console.log("payload",t.payload),e.value=t.payload}}}),be=pe.actions.updateError,fe=pe.reducer,ge=a(159),Ee=a.n(ge),ve=Object(oe.b)({name:"successInfo",initialState:{value:!1},reducers:{toggle:function(e){e.value=!e.value}}}),he=ve.actions.toggle,ye=ve.reducer,Ne=a(73);a(228);function je(){var e=Object(u.c)(function(e){return e.errorInfo.value}),t=Object(u.c)(function(e){return e.successInfo.value}),a=Object(u.b)(),c={onOpen:function(e){return console.log(e.foo)},onClose:function(e){return console.log(e.foo)},autoClose:2e3,type:Ne.b.TYPE.INFO,hideProgressBar:!1,position:Ne.b.POSITION.TOP_CENTER,pauseOnHover:!0,closeButton:!1};return Object(n.useEffect)(function(){console.log("error info ",e),t?(c.type=Ne.b.TYPE.SUCCESS,c.onClose=function(e){a(he())},Object(Ne.b)("Operation Success!",c)):e.techError&&(c.type=Ne.b.TYPE.ERROR,c.onClose=function(e){a(be({}))},Object(Ne.b)(e.techError,c))},[e,t]),r.a.createElement(Ne.a,null)}var Oe=function(){var e=Object(o.g)(),t=Object(u.b)(),a=(Object(u.c)(function(e){return e.userInfo.value}),Object(n.useState)("")),c=Object(i.a)(a,2),l=c[0],m=c[1],d=Object(n.useState)(""),f=Object(i.a)(d,2),g=f[0],E=f[1];Object(n.useEffect)(function(){localStorage.removeItem("authToken"),t(de({}))},[]);var v=function(){var a=Object(p.a)(_.a.mark(function a(n){var r,c;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,a.next=4,C({email:l,password:g});case 4:return r=(r=a.sent).data,console.log("this is the response: ",r),localStorage.setItem("authToken",r.accessToken),a.next=10,L();case 10:c=(c=a.sent).data,t(ue(c.data)),console.log("process ENV","f06fc2e0e3a78a7ca79b"),(ce=new Ee.a("f06fc2e0e3a78a7ca79b",{cluster:"eu",encrypted:!0,authEndpoint:"".concat(b.api,"/pusher/auth"),auth:{headers:{Authorization:localStorage.getItem("authToken")?"Bearer "+localStorage.getItem("authToken"):""}}})).subscribe("private-notification.".concat(c.data.id)).bind("notification",function(e){console.log("I am insideeeee"),console.log("bind data ",e),new Notification(e.details.title,{body:e.details.payload.message})}),e("/".concat(r.userData.type,"/")),console.log("Login was Successful"),a.next=25;break;case 21:a.prev=21,a.t0=a.catch(1),console.log("unsuccesful Login Attempt ",a.t0),t(be({techError:a.t0.message}));case 25:case"end":return a.stop()}},a,null,[[1,21]])}));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"login__parent__container"},r.a.createElement("div",{className:"login__container"},r.a.createElement("img",{src:"emergency-frontend/Images/logo-svg.svg",alt:"",className:"logo"}),r.a.createElement("div",{className:"login__form__container"},r.a.createElement("div",{className:"main__header"},r.a.createElement("h1",{className:"main__header__title"},"Login"),r.a.createElement("p",{className:"main-header__text"},"Enter your login details to sign in to your account")),r.a.createElement(le.a,{className:"form",onSubmit:v},r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicEmail"},r.a.createElement(le.a.Label,{className:"form__label"},"Email address"),r.a.createElement(le.a.Control,{required:!0,className:"form__input",type:"email",placeholder:"Enter email",value:l,onChange:function(e){return m(e.target.value)}}),r.a.createElement(le.a.Text,{className:"text-muted form__label"},"We'll never share your email with anyone else.")),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicPassword"},r.a.createElement(le.a.Label,{className:"form__label"},"Password"),r.a.createElement(le.a.Control,{required:!0,className:"form__input",type:"password",placeholder:"Password",value:g,onChange:function(e){return E(e.target.value)}})),r.a.createElement($.a,{className:"mb-2 submit__button",style:{marginRight:"8px"},variant:"primary",type:"submit"},"Submit"),r.a.createElement($.a,{className:"mb-2 submit__button",variant:"primary",onClick:function(e){console.log(Notification.permission),Notification.requestPermission(),"granted"===Notification.permission&&console.log("notification access is granted")}},"Get Notifications")),r.a.createElement(s.b,{to:"register",className:"link__register"},r.a.createElement("p",null,"Register a New User")))))};function xe(){var e=Object(o.g)();return r.a.createElement("div",{className:"h-100 w-100 d-flex align-items-start align-items-md-center p-3 justify-content-center"},r.a.createElement("div",{className:"d-block d-md-flex justify-content-between align-items-center w-100 px-4"},r.a.createElement("div",{className:"text-center text-md-start"},r.a.createElement("div",{style:{fontSize:"4rem",lineHeight:"3.25rem"}},"404"),r.a.createElement("div",{style:{fontSize:"1.75rem"},className:"mb-0"},"Page Not Found"),r.a.createElement("div",{style:{color:"rgba(0, 0, 0, 0.4)"},className:"mb-2"},"Looks like you tried to visit a page that does not exist"),r.a.createElement($.a,{onClick:function(){return e("/")}},"Go Home")),r.a.createElement("img",{className:"d-none d-md-block",style:{width:"50vw"},src:"https://img.freepik.com/free-vector/404-error-with-landscape-concept-illustration_114360-7898.jpg?t=st=1656284933~exp=1656285533~hmac=8fc7586f95f9bfc995828df2003d1bc498d90b90afeef850a114ea97f72c3923&w=1800",alt:""})))}function we(){var e=Object(o.g)(),t=Object(o.f)().pathname.split("/")[1],a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],s=c[1];Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("user"===t?"user/emergencies":"agents/chat_rooms");case 2:a=e.sent,s(a.data.data),console.log(a.data.data);case 5:case"end":return e.stop()}},e)}))()},[]);var m=l.map(function(t){return r.a.createElement("div",{className:"messages__row__container",key:t.id,onClick:function(a){e("chatroom/".concat(t.chat_room_id,"?chatRoomType=").concat(t.chat_room_type))}},r.a.createElement("div",{className:"messages__row__avatar"},"# ",t.id),r.a.createElement("div",{className:"messages__row__right"},r.a.createElement("div",{className:"messages__row__label"},t.chat_room_type?t.agent_name:"Emergency ".concat(t.id)),r.a.createElement("div",{className:"messages__row__message"},t.description)))});return r.a.createElement("div",{className:"general__mobile__container"},r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("h1",{className:"general__mobile__title mx-3",style:{"font-size":"1.35rem"}},"Chat Rooms")),m)}function ke(){var e=Object(u.c)(function(e){return e.userInfo.value});return Object(n.useEffect)(function(){console.log(e)},[]),r.a.createElement("div",{className:"general__mobile__container"},r.a.createElement("div",null,r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("h1",{className:"general__mobile__title mx-3",style:{"font-size":"1.35rem"}},"Profile")),r.a.createElement("div",{className:"d-flex flex-column align-items-center mb-4"},r.a.createElement("div",{className:"user__avatar mb-2"},e.name.split(" ")[0][0].toUpperCase()+e.name.split(" ")[1][0].toUpperCase()),r.a.createElement("div",{className:"user__avatar__label"},e.name)),r.a.createElement("div",null,r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicDoB"},r.a.createElement(le.a.Label,{className:"general__mobile__label"},"Email"),r.a.createElement(le.a.Control,{required:!0,className:"general__mobile__input",disabled:!0,type:"email",value:e.email})),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicDoB"},r.a.createElement(le.a.Label,{className:"general__mobile__label"},"Phone"),r.a.createElement(le.a.Control,{required:!0,className:"general__mobile__input",disabled:!0,type:"number",value:e.phone_number})),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicDoB"},r.a.createElement(le.a.Label,{className:"general__mobile__label"},"ID"),r.a.createElement(le.a.Control,{className:"general__mobile__input",disabled:!0,type:"number",value:e.id})),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicDoB"},r.a.createElement(le.a.Label,{className:"general__mobile__label"},"Type"),r.a.createElement(le.a.Control,{required:!0,className:"general__mobile__input",disabled:!0,type:"text",value:e.type})))))}function Se(){var e=Object(u.b)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),b=d[0],f=d[1],g=Object(n.useState)(""),E=Object(i.a)(g,2),v=E[0],h=E[1],y=Object(n.useState)(""),N=Object(i.a)(y,2),j=N[0],O=N[1],x=Object(n.useState)(""),w=Object(i.a)(x,2),k=w[0],S=w[1],C=Object(n.useState)(""),I=Object(i.a)(C,2),T=I[0],A=I[1],L=Object(o.g)();Object(n.useEffect)(function(){},[]);var P=function(){var t=Object(p.a)(_.a.mark(function t(a){var n,r;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={first_name:j,last_name:k,email:c,password:b,phone_number:v,password_confirmation:b,dob:T,type:"user"},t.prev=2,t.next=5,B(n);case 5:r=(r=t.sent).data,localStorage.setItem("authToken",r.data.token),L("/user/sms-verify/".concat(r.data.request_id,"/").concat(r.data.user.id)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("error",t.t0),e(be({techError:t.t0.message,descriptiveError:t.t0.response.data.data}));case 15:case"end":return t.stop()}},t,null,[[2,11]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"general__mobile__container registration__form__container"},r.a.createElement("div",{className:"text-center mx-3"},r.a.createElement("h1",{className:"registration__form__title"},"Sign Up"),r.a.createElement("p",{className:"registration__form__subtitle"},"Enter your details to create a user account")),r.a.createElement(le.a,{onSubmit:P},r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicEmail"},r.a.createElement(le.a.Label,{className:"registration__form__label"},"Email address"),r.a.createElement(le.a.Control,{className:"registration__form__input",required:!0,type:"email",placeholder:"Enter email",value:c,onChange:function(e){l(e.target.value)}}),r.a.createElement(le.a.Text,{className:"text-muted d-none"},"We'll never share your email with anyone else.")),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicFirstName"},r.a.createElement(le.a.Label,{className:"registration__form__label"},"First Name"),r.a.createElement(le.a.Control,{className:"registration__form__input",required:!0,type:"text",placeholder:"Enter First Name",value:j,onChange:function(e){O(e.target.value)}})),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicLastName"},r.a.createElement(le.a.Label,{className:"registration__form__label"},"Last Name"),r.a.createElement(le.a.Control,{className:"registration__form__input",required:!0,type:"text",placeholder:"Enter Last Name",value:k,onChange:function(e){return S(e.target.value)}})),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicPhoneNumber"},r.a.createElement(le.a.Label,{className:"registration__form__label"},"Phone Number"),r.a.createElement(le.a.Control,{className:"registration__form__input",required:!0,type:"number",placeholder:"Enter Phone Number",value:v,onChange:function(e){return h(e.target.value)}}),r.a.createElement(le.a.Text,null,"Make sure the number starts with 90")),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicPassword"},r.a.createElement(le.a.Label,{className:"registration__form__label"},"Password"),r.a.createElement(le.a.Control,{className:"registration__form__input",required:!0,type:"password",placeholder:"Password",value:b,onChange:function(e){return f(e.target.value)}})),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicDoB"},r.a.createElement(le.a.Label,{className:"registration__form__label"},"Date of Birth"),r.a.createElement(le.a.Control,{className:"registration__form__input",required:!0,type:"date",placeholder:"Enter Date",value:T,onChange:function(e){return A(e.target.value)}})),r.a.createElement($.a,{className:"registration__form__button mb-2",variant:"primary",type:"submit",block:!0},"Register"),r.a.createElement(s.b,{className:"text-decoration-none",to:"/"},"Go Back"))))}var Ce=a(3),Ie=(a(231),a(160)),Te=a(111),Be=a(251);function Ae(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Le(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,c=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw c}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a(105).default;function Pe(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),f=b[0],g=b[1],E=Object(n.useState)(0),v=Object(i.a)(E,2),h=v[0],y=v[1],N=Object(n.useState)([]),j=Object(i.a)(N,2),O=j[0],x=j[1],w=r.a.useState({lat:null,lng:null}),k=Object(i.a)(w,2),S=k[0],C=(k[1],Object(u.b)());Object(n.useEffect)(function(){console.log(o)},[o]),Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:t=e.sent,x(t.data.data),y(t.data.data[0].id),console.log(O),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))()},[]);var T=Object(Ie.a)(),B=T.register,A=T.handleSubmit,L=function(){var e=Object(p.a)(_.a.mark(function e(t){var a,n,r,l,s,i,m;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=new Date,r=new FormData,l=Ae(o);try{for(l.s();!(s=l.n()).done;)i=s.value,console.log(i),r.append(i.name,i)}catch(u){l.e(u)}finally{l.f()}return a={latitude:S.lat,longitude:S.lng},Object(Ce.a)(a,"latitude",1),Object(Ce.a)(a,"longitude",2),Object(Ce.a)(a,"description",f),Object(Ce.a)(a,"time",n.getTime()),Object(Ce.a)(a,"emergency_type_id",h),m=a,Object.keys(m).forEach(function(e){r.append(e,m[e])}),e.prev=7,e.next=10,I(r);case 10:c(!1),C(he()),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0),c(!1),C(be({techError:e.t0.message,descriptiveError:e.t0.response.data.data}));case 19:case"end":return e.stop()}},e,null,[[7,14]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"general__mobile__container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"general__mobile__title mx-3",style:{"font-size":"1.35rem"}},"Emergency Assistance Needed?"),r.a.createElement("p",{className:"general__mobile__subtitle"},"Press the button to report an emergency")),r.a.createElement("div",{className:"ripple__button__container"},r.a.createElement("div",{onClick:function(){return c(!0)},className:"ripple__effect__button"},r.a.createElement("i",{class:"bi bi-broadcast"}))),r.a.createElement(Be.a,{show:a,onHide:function(){return c(!1)},placement:"bottom",className:"h-auto"},r.a.createElement(Be.a.Header,{closeButton:!0},r.a.createElement(Be.a.Title,null,"Send Report")),r.a.createElement(Be.a.Body,null,r.a.createElement(le.a,{onSubmit:A(L)},r.a.createElement(le.a.Group,{className:"mb-3"},r.a.createElement(le.a.Select,{"aria-label":"Default select example",disabled:O.length<=0,value:h,onChange:function(e){return y(e.target.value)}},O.map(function(e){return r.a.createElement("option",{key:Object(Te.a)(),value:e.id},e.name)})),r.a.createElement(le.a.Text,null,"Choose the Kind of Emergency")),r.a.createElement(le.a.Group,{controlId:"formFileMultiple",className:"mb-3"},r.a.createElement(le.a.Control,Object.assign({type:"file",multiple:!0},B("files"),{onChange:function(e){return m(e.target.files)}})),r.a.createElement(le.a.Text,null,"You can Upload Multiple files")),r.a.createElement(le.a.Group,{className:"mb-3",controlId:"formBasicDescription"},r.a.createElement(le.a.Control,{required:!0,type:"text",placeholder:"Emergency Description",value:f,onChange:function(e){return g(e.target.value)}}),r.a.createElement(le.a.Text,null,"Please be as descriptive as possible")),r.a.createElement($.a,{type:"submit"},"Submit form"))))))}function Re(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(o.g)(),m=Object(n.useState)(""),d=Object(i.a)(m,2),b=(d[0],d[1]),f=(Object(u.b)(),Object(o.i)()),g=f.id,E=f.request_id;function v(){return(v=Object(p.a)(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={request_id:E,code:a,id:g},e.prev=2,e.next=5,w(n);case 5:e.sent,l("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),b(e.t0.response.data?"".concat(e.t0.message,", ").concat(e.t0.response.data.message):e.t0.message);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))).apply(this,arguments)}return r.a.createElement("div",{className:"general__mobile__container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"general__mobile__title"},"Verify Phone"),r.a.createElement("p",{className:"general__mobile__subtitle"},"Verification code sent to 90533 860 1322")),r.a.createElement(le.a,{onSubmit:function(e){return v.apply(this,arguments)}},r.a.createElement(le.a.Group,{className:"my-5 text-center",controlId:"formBasicSmsVerification"},r.a.createElement(le.a.Control,{required:!0,className:"general__mobile__input mb-2",type:"number",placeholder:"Enter Code",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement($.a,{variant:"primary",className:"general__mobile__button mb-2",type:"submit"},"Verify and Sign-up")),r.a.createElement(s.b,{className:"label acct-label text-decoration-none",to:"/"},"Cancel"))}function Fe(){var e=Object(o.f)().pathname.split("/")[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user__app__container"},r.a.createElement(o.a,null),r.a.createElement(Z.a,{bg:"light",expand:"lg",className:"user-bottom-navbar w-100"},r.a.createElement(ee.a,{className:"navbar__item__container",id:"change-flex-to-row"},r.a.createElement(ee.a.Item,{className:(e?"":"nav__item__active")+" nav__item"},r.a.createElement(s.b,{to:"",className:"link__dark"},r.a.createElement("i",{className:(e?"bi-house":"bi-house-fill")+" bi  fa-lg"}))),r.a.createElement(ee.a.Item,{className:("chat"===e?"nav__item__active":"")+" nav__item"},r.a.createElement(s.b,{to:"chat",className:"link__dark"},r.a.createElement("i",{className:("chat"===e?"bi-chat-left-dots-fill":"bi-chat-left-dots")+" bi  fa-lg"}))),r.a.createElement(ee.a.Item,{className:("profile"===e?"nav__item__active":"")+" nav__item"},r.a.createElement(s.b,{to:"profile",className:"link__dark"},r.a.createElement("i",{className:"bi bi-person-circle fa-lg"}))),r.a.createElement(ee.a.Item,{className:("call-help"===e?"nav__item__active":"")+" nav__item"},r.a.createElement(s.b,{to:"call-help",className:"link__dark"},r.a.createElement("i",{className:("call-help"===e?"bi-telephone-fill":"bi-telephone")+" bi  fa-lg"}))),r.a.createElement(ee.a.Item,{className:"nav__item"},r.a.createElement(s.b,{to:"/",className:"link__dark"},r.a.createElement("i",{className:"bi bi-box-arrow-right fa-lg"})))))," "),r.a.createElement("div",{className:"d-none d-md-block"},r.a.createElement(J,null)))}var De=a(296),ze=a(297),Ge=a(230),Ue=a(161),qe=a.n(Ue),Me=a(238),He=a.n(Me),We=a(162),Ye=a.n(We),Ve=a(239),$e=a.n(Ve),Je=a(163),Ke=a.n(Je),Qe=a(164),Xe=a.n(Qe),Ze=a(241),et=a.n(Ze),tt=a(240),at=a.n(tt);function nt(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"general__mobile__container"},r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("h1",{className:"general__mobile__title",style:{"font-size":"1.35rem"}},"Emergency Numbers")),r.a.createElement(De.a,{className:"justify-content-center"},r.a.createElement(ze.a,null,r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",style:{backgroundColor:"hsla(210, 100%, 71%, 0.306)",borderColor:"hsla(210, 100%, 71%, 0)"},href:"tel:155",variant:"secondary"},r.a.createElement(qe.a,{style:{color:"#6bb5ff"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Police")),r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",style:{backgroundColor:"rgba(255, 107, 107, 0.2)",borderColor:"rgba(255, 107, 107, 0.0)"},href:"tel:199",variant:"secondary"},r.a.createElement(He.a,{style:{color:"#FF6B6B"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Fire"))),r.a.createElement(ze.a,{className:"gy-5"},r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",style:{backgroundColor:"white",borderColor:"rgb(209 209 209)"},href:"tel:112",variant:"secondary"},r.a.createElement(Ye.a,{style:{color:"#FF6B6B"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Ambulance")),r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",style:{backgroundColor:"rgba(107, 203, 119, 0.2)",borderColor:"transparent"},href:"tel:177",variant:"secondary"},r.a.createElement($e.a,{style:{color:"#6BCB77"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Forest Fires"))),r.a.createElement(ze.a,null,r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",style:{backgroundColor:"rgba(107, 107, 255, 0.2)",borderColor:"transparent"},href:"tel:158",variant:"secondary"},r.a.createElement(Ke.a,{style:{color:"#6b6bff"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Coast Guard")),r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",href:"tel:166",style:{backgroundColor:"rgba(56, 56, 56, 0.2)",borderColor:"transparent"},variant:"secondary"},r.a.createElement(at.a,{style:{color:"#383838"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Meteorology"))),r.a.createElement(ze.a,null,r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",style:{backgroundColor:"rgba(255, 217, 61, 0.2)",borderColor:"transparent"},href:"tel:188",variant:"secondary"},r.a.createElement(Xe.a,{style:{color:"#FFD93D"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Electrical Faults")),r.a.createElement(Ge.a,null,r.a.createElement($.a,{className:"d-flex justify-content-center align-items-center py-5",style:{backgroundColor:"rgba(255, 181, 107, 0.2)",borderColor:"transparent"},href:"tel:161",variant:"secondary"},r.a.createElement(et.a,{style:{color:"#ffb56b"},className:"emergency__number__icons"})),r.a.createElement("p",null,"Phone issues"))))))}var rt=a(17),ct=a(112);function lt(e){e.chatRoomType;var t=Object(s.c)(),a=Object(i.a)(t,2),c=a[0],l=(a[1],Object(n.useState)([])),m=Object(i.a)(l,2),d=m[0],b=m[1],f=Object(n.useState)(""),g=Object(i.a)(f,2),E=g[0],v=g[1],h=Object(o.g)(),y=Object(n.useState)({page:1,perPage:0,total:0}),N=Object(i.a)(y,2),w=N[0],k=N[1],S=Object(u.c)(function(e){return e.userInfo.value});Object(n.useEffect)(function(){try{if("agent_chat"===c.get("chatRoomType"))ce.subscribe("private-agent-chat.".concat(C)).bind("message",function(e){console.log("I got called"),I(e.user.name,e.chatMessage.message)});else ce.subscribe("private-chat.".concat(C)).bind("message",function(e){console.log("I got called"),I(e.user.id,e.chatMessage.message)});console.log(ce)}catch(e){console.log(e),h("/")}return function(){ce&&("agent_chat"===c.get("chatRoomType")?ce.unsubscribe("private-agent-chat.".concat(C)):ce.unsubscribe("private-chat.".concat(C)))}},[]);var C=Object(o.i)().chatroom_id;function I(e,t){b(function(a){return[{user_id:e,message:t}].concat(Object(rt.a)(a))})}function T(){return(T=Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(se.a)({},w,{page:w.page+1}),e.prev=1,"agent_chat"!==c.get("chatRoomType")){e.next=8;break}return e.next=5,x(C);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,O(C);case 10:e.t0=e.sent;case 11:t=(t=e.t0).data.data,console.log(t),b([].concat(Object(rt.a)(d),Object(rt.a)(t.data))),k({page:t.current_page,perPage:t.per_page,total:t.total}),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(1),console.log(e.t1);case 21:case"end":return e.stop()}},e,null,[[1,18]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"agent_chat"!==c.get("chatRoomType")){e.next=7;break}return e.next=4,x(C);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,O(C);case 9:e.t0=e.sent;case 10:t=(t=e.t0).data.data,console.log(t),b(t.data),k({page:t.current_page,perPage:t.per_page,total:t.total}),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(0),console.log(e.t1);case 20:case"end":return e.stop()}},e,null,[[0,17]])}))()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chatroom__header__container d-flex justify-content-between align-items-center"},r.a.createElement("i",{onClick:function(){return h(-1)},style:{fontSize:"1.15rem"},class:"bi bi-chevron-left"}),r.a.createElement("h1",{className:"general__mobile__title mb-0",style:{"font-size":"1.35rem"}},"Chatroom ",C),r.a.createElement("div",null)),r.a.createElement("div",{className:"chatroom__container pb-0"},r.a.createElement("div",{id:"scrollableDiv",style:{overflow:"scroll",display:"flex",flexDirection:"column",flex:"1"}},r.a.createElement(ct.a,{dataLength:d.length,next:function(){return T.apply(this,arguments)},className:"chat__room__container",style:{display:"flex",flexDirection:"column-reverse"},hasMore:d.length<w.total,loader:r.a.createElement("h4",null,"Loading..."),scrollableTarget:"scrollableDiv",inverse:!0},d.map(function(e,t){return r.a.createElement("div",{className:e.user_id===S.id?"message__right__side":"message__left__side",key:t},r.a.createElement("div",{className:e.user_id===S.id?"d-none":"message__username__label"},e.user_name,":"),"".concat(e.message))})))),r.a.createElement(le.a,{style:{padding:"12px"},onSubmit:function(e){e.preventDefault(),"agent_chat"===c.get("chatRoomType")?M(C,{message:E}):j(C,{message:E})}},r.a.createElement(le.a.Group,{className:"d-flex align-items-center",controlId:"formBasicPassword"},r.a.createElement(le.a.Control,{required:!0,type:"text",className:"chat__message__input",placeholder:"Enter your Msg here",value:E,onChange:function(e){v(e.target.value)}}),r.a.createElement($.a,{type:"submit",className:"message__send__button"},r.a.createElement("i",{class:"bi bi-send-fill"})))))}function st(){var e=function(){var e=Object(u.c)(function(e){return e.userInfo.value}),t=localStorage.getItem("authToken"),a=Object(o.f)().pathname.split("/"),n=a[1],r=a[2];return console.log(a),console.log("applet name: ",n),console.log(n),""!==n&&"login"!==n&&"register"!==n&&n?"agents"===r||"emergencies"===r?"authority"===e.type||"admin"===e.type:"authorities"===r||"customers"===r?"admin"===e.type:"sms-verify"===r?localStorage.getItem("authToken"):t?e.type===n||(console.log("user is trying to access a page he is not allowed to"),!1):(console.log("user doesnt have an authToken"),!1):(console.log("pages that dont require authentication"),!0)}(),t=Object(n.useState)(e),a=Object(i.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)(function(){l(e)},[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(je,null),c?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,null)):r.a.createElement(X,null))}var ot=a(314);function it(e){var t=e.table_name,a=(e.selectedRows,e.setSelectedRows),c=e.emergencyId,l=Object(n.useState)([]),s=Object(i.a)(l,2),m=s[0],d=s[1],b=Object(n.useState)([]),f=Object(i.a)(b,2),g=f[0],E=f[1],v=Object(n.useState)(1),h=Object(i.a)(v,2),y=h[0],N=h[1],j=Object(n.useState)({}),O=Object(i.a)(j,2),x=O[0],w=O[1],k=Object(n.useState)({page:y,total:0}),S=Object(i.a)(k,2),C=S[0],I=S[1],T=Object(u.b)(),B=Object(o.g)(),A=Object(n.useState)(!0),L=Object(i.a)(A,2),P=L[0],R=L[1];Object(n.useEffect)(function(){console.log("i ran"),Object(p.a)(_.a.mark(function e(){var a,n,r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,R(!0),a=new URLSearchParams(Object(se.a)({},C,{page:y},x)).toString(),"mergable-emergencies"!==t){e.next=9;break}return e.next=6,F(c);case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,G(t,a);case 11:n=e.sent;case 12:E(n.data.data),console.log("NO of Rows "+n.data.data.length),r=n.data.columns.map(function(e){return Object(se.a)({},e,{flex:1})}),d(r),I(Object(se.a)({},n.data.meta,{perPage:parseInt(n.data.meta.per_page),page:y})),R(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("unsuccesful table fetch attempt ",e.t0),T(be({techError:e.t0.message}));case 24:case"end":return e.stop()}},e,null,[[0,20]])}))()},[y,x,t,C.total]);var D=Object(n.useState)(C.total),z=Object(i.a)(D,2),U=z[0],q=z[1];return Object(n.useEffect)(function(){q(function(e){return void 0!==C.total?C.total:e})},[C.total,q]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100",style:{height:"93%"}},r.a.createElement(ot.a,{rows:g,columns:m,pageSize:15,rowsPerPageOptions:[15],checkboxSelection:!0,paginationMode:"server",loading:P,sortingMode:"server",onSortModelChange:function(e,t){console.log("model",e),console.log("details",t),w({orderBy:e[0].field,orderByDirection:e[0].sort})},onRowClick:function(e,a){console.log("row clicked",t),console.log("row clicked",e),B("form/".concat("available-agents"===t?"agents":t,"/").concat(e.id))},rowCount:U,onPageChange:function(e,t){N(e+1)},onSelectionModelChange:function(e){console.log("rows selected: ",e),a(e)}})))}function mt(){var e=Object(o.h)(),t=Object(i.a)(e,2),a=t[0],c=(t[1],Object(n.useState)([])),l=Object(i.a)(c,2),s=l[0],m=l[1];return r.a.createElement("div",{className:"dashboard__container"},r.a.createElement("div",{className:"authority__card card__height"},r.a.createElement("div",{className:"d-flex align-items-center mb-3 justify-content-between"},r.a.createElement("div",{className:"authority__card__title"},"DASHBOARD")),r.a.createElement(it,{table_name:a,selectedRows:s,setSelectedRows:m})))}var ut=a(313);function dt(e){var t=e.formType,a=e.id,c=Object(u.b)(),l=Object(n.useState)(!0),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)([]),b=Object(i.a)(d,2),f=b[0],g=b[1],E=Object(n.useState)([]),v=Object(i.a)(E,2),h=(v[0],v[1]);Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z("create_form"===a?"".concat(t,"/").concat(a):"".concat(t,"/").concat(a,"/form"));case 3:n=(n=e.sent).data.data,g(n),h(n),m(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("unsuccesful form fetch attempt ",e.t0),c(be({techError:e.t0.message,descriptiveError:e.t0.response.data.data}));case 14:case"end":return e.stop()}},e,null,[[0,10]])}))()},[]);var y=function(){var e=Object(rt.a)(f),t={};return e.forEach(function(e,a){t[e.field]=e.value}),t};function N(){return(N=Object(p.a)(_.a.mark(function e(n){var r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=y(),"create_form"!==a){e.next=17;break}return console.log("you are trying to create a new item"),e.prev=4,e.next=7,U("".concat(t),r);case 7:e.sent,c(he()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("unsuccesful creating Attempt ",e.t0),c(be({techError:e.t0.message,descriptiveError:e.t0.response.data.data}));case 15:e.next=27;break;case 17:return e.prev=17,e.next=20,R("".concat(t,"/").concat(a),r);case 20:e.sent,e.next=27;break;case 23:e.prev=23,e.t1=e.catch(17),console.log("unsuccesful update Attempt ",e.t1),c(be({techError:e.t1.message,descriptiveError:e.t1.response.data.data}));case 27:case"end":return e.stop()}},e,null,[[4,11],[17,23]])}))).apply(this,arguments)}function j(){return(j=Object(p.a)(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q({agent_id:a});case 3:n=e.sent,console.log(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),c(be(e.t0.message));case 11:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}Object(n.useEffect)(function(){console.log(f)},[f]);var O=function(e,t){console.log(e,t);var a=Object(rt.a)(f);a=a.map(function(a){return Object(se.a)({},a,{value:a.field===e?t:a.value})}),g(a)},x=f.map(function(e,t){return r.a.createElement(le.a.Group,{as:Ge.a,md:6,key:t,className:"mb-3",controlId:"formBasicEmail"},r.a.createElement(le.a.Label,null,e.title),"checkbox"===e.type?r.a.createElement(le.a.Check,{disabled:e.disabled,checked:!!e.value,onChange:function(t){O(e.field,!e.value)}}):"select"===e.type?r.a.createElement(le.a.Select,{"aria-label":"Default select example",disabled:e.options.length<=0||e.disabled,value:e.value,onChange:function(t){return O(e.field,t.target.value)}},e.options.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})):r.a.createElement(le.a.Control,{type:e.type,placeholder:"Enter ".concat(e.title),value:null===e.value?void 0:e.value,required:!0,disabled:e.disabled,onChange:function(t){O(e.field,t.target.value)}}))});return r.a.createElement(r.a.Fragment,null,o?r.a.createElement(ut.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")):r.a.createElement(le.a,{as:ze.a,onSubmit:function(e){return N.apply(this,arguments)}},x,r.a.createElement(Ge.a,{md:6},r.a.createElement($.a,{className:"w-100",variant:"primary",type:"submit"},"Register")),"agents"===t?r.a.createElement(Ge.a,{md:6},r.a.createElement($.a,{className:"w-100",onClick:function(){!function(e){j.apply(this,arguments)}()},variant:"primary"},"Send Text Message")):r.a.createElement(r.a.Fragment,null)))}var _t=a(318);function pt(){var e=Object(u.b)(),t=Object(o.i)(),a=t.formType,c=t.id,l=Object(n.useState)(),s=Object(i.a)(l,2),m=s[0],d=s[1],b=Object(n.useState)(),f=Object(i.a)(b,2),g=(f[0],f[1],Object(n.useState)([])),E=Object(i.a)(g,2),N=E[0],j=E[1],O=Object(n.useState)([]),x=Object(i.a)(O,2),w=x[0],k=x[1],S=Object(n.useState)([]),C=Object(i.a)(S,2),I=C[0],T=C[1],B=Object(n.useState)(),A=Object(i.a)(B,2),L=A[0],P=A[1],R=Object(n.useState)(!1),F=Object(i.a)(R,2),D=F[0],z=F[1],G=Object(n.useState)(),U=Object(i.a)(G,2),q=U[0],M=U[1],V=Object(n.useState)(),J=Object(i.a)(V,2),K=J[0],Q=J[1];Object(n.useEffect)(function(){console.log("formType",a),"emergencies"===a&&c?(y(c).then(function(e){console.log(e.data),d(e.data.data),P(e.data.data.emergency),k(e.data.data.assigned_agents),T(e.data.data.emergency_files)}),h(c).then(function(e){Q(e.data.data)})):"agents"===a&&c&&z(!0)},[]);var X=Object(n.useState)(!1),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(!1),ne=Object(i.a)(ae,2),re=ne[0],ce=ne[1],oe=function(){return te(!1)},ie=function(){var t=Object(p.a)(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(c,q);case 3:Q(function(e){return[].concat(Object(rt.a)(e),[{note:q}])}),M(""),e(he()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e(be(t.t0.message));case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}(),me=function(e,t){var a=Object(se.a)({},L);a[e]=!a[e],console.log("new Val",a),P(a)},ue=function(){var e=Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(L.id,L);case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),de=Object(n.useState)(!1),_e=Object(i.a)(de,2),pe=_e[0],fe=_e[1],ge=function(){return fe(!1)},Ee=function(){return ce(!1)},ve=function(){var t=Object(p.a)(_.a.mark(function t(){var a;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H(c,N);case 3:a=t.sent,k(a.data.data),oe(),e(he()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e(be(t.t0.message));case 13:case"end":return t.stop()}},t,null,[[0,9]])}));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"authority__form__container"},m?r.a.createElement(r.a.Fragment,null,r.a.createElement(_t.a,{size:"lg",dialogClassName:"ultra__wide__modal",centered:!0,show:ee,onHide:oe},r.a.createElement(_t.a.Header,{className:"modal__header__class",closeButton:!0},r.a.createElement(_t.a.Title,{className:"modal__title__class"},"Assign Agents")),r.a.createElement(_t.a.Body,{style:{height:"70vh",overflowY:"scroll"}},r.a.createElement("div",null),r.a.createElement(it,{table_name:"available-agents",selectedRows:N,setSelectedRows:j})),r.a.createElement(_t.a.Footer,null,r.a.createElement($.a,{variant:"primary",onClick:ve},"Save Changes"))),r.a.createElement(_t.a,{size:"lg",dialogClassName:"ultra__wide__modal",centered:!0,show:re,onHide:Ee},r.a.createElement(_t.a.Header,{className:"modal__header__class",closeButton:!0},r.a.createElement(_t.a.Title,{className:"modal__title__class"},"Merge Emergencies, choose emergencies to combine")),r.a.createElement(_t.a.Body,{style:{height:"70vh",overflowY:"scroll"}},r.a.createElement("div",null),r.a.createElement(it,{table_name:"mergable-emergencies",selectedRows:N,setSelectedRows:j,emergencyId:c})),r.a.createElement(_t.a.Footer,null,r.a.createElement($.a,{variant:"primary",onClick:function(){try{W(c,N),Ee(),e(he())}catch(t){console.log(t),e(be(t.message))}}},"Save Changes"))),r.a.createElement(_t.a,{size:"lg",centered:!0,dialogClassName:"ultra__wide__modal",show:pe,onHide:ge},r.a.createElement(_t.a.Header,{className:"modal__header__class",closeButton:!0},r.a.createElement(_t.a.Title,{className:"modal__title__class"},"Add Evidence")),r.a.createElement(_t.a.Body,null,r.a.createElement(ze.a,null,r.a.createElement(Ge.a,{md:8},r.a.createElement("div",{className:"upload__evidence__body"},r.a.createElement("i",{className:"bi bi-cloud-upload-fill fa-lg"}),r.a.createElement("div",{className:"mb-3"},"Drop Files Here or"),r.a.createElement($.a,null,"Click Here"))),r.a.createElement(Ge.a,{md:4},r.a.createElement("div",null,"Uploaded Files")))),r.a.createElement(_t.a.Footer,null,r.a.createElement($.a,{variant:"primary",onClick:ge},"Save Changes"))),r.a.createElement(ze.a,{className:"mb-3"},r.a.createElement(Ge.a,{lg:9},r.a.createElement("div",{className:"authority__card mb-3"},r.a.createElement("div",{className:"mb-3 d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"authority__card__title"},"Emergency Details"),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement($.a,{style:{marginRight:"8px"},onClick:ue},"Update Emergency"),r.a.createElement($.a,{onClick:function(){ce(!0)},variant:"primary"},"Merge Events"))),r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__detail__info"},m.emergency.description)),r.a.createElement("div",{className:""},r.a.createElement(ze.a,null,r.a.createElement(Ge.a,{lg:12},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__detail__label"},"Reported Event"),r.a.createElement("div",{className:"emergency__detail__label"},"Emergency Type"),r.a.createElement("div",{className:"emergency__detail__label"},"Reported By"),r.a.createElement("div",{className:"emergency__detail__label"},"Reported At"),r.a.createElement("div",{className:"emergency__detail__label"},"Latitude"),r.a.createElement("div",{className:"emergency__detail__label"},"Longitude"),r.a.createElement("div",{className:"emergency__detail__label"},"Status"),r.a.createElement("div",{className:"emergency__detail__label"},"Is Active"),r.a.createElement("div",{className:"emergency__detail__label"},"Completed")),r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__detail__info"},m.emergency_types.find(function(e){return e.id===m.emergency.emergency_type_id}).name),r.a.createElement("div",{className:"emergency__detail__info"},c),r.a.createElement("div",{className:"emergency__detail__info"},m.reporting_user.name),r.a.createElement("div",{className:"emergency__detail__info"},m.reporting_user.created_at),r.a.createElement("div",{className:"emergency__detail__info"},m.emergency.latitude),r.a.createElement("div",{className:"emergency__detail__info"},m.emergency.longitude),r.a.createElement(le.a.Select,{className:"emergency__detail__select",onChange:function(e){!function(e,t){console.log("changing this ",e,t);var a=Object(se.a)({},L);a[e]=t,console.log("new Val",a),P(a)}("status",e.target.value)},value:L?L.status:void 0},m.available_statuses.map(function(e,t){return r.a.createElement("option",{key:Object(Te.a)(),value:e},e)})),r.a.createElement(le.a.Check,{checked:!(!L||!L.is_active)||void 0,className:"emergency__detail__select",onChange:function(e){me("is_active",e.target.value)}}),r.a.createElement(le.a.Check,{checked:!(!L||!L.completed)||void 0,className:"emergency__detail__select",onChange:function(e){me("completed",e.target.value)}})))))))),r.a.createElement(Ge.a,{lg:3},r.a.createElement("div",{className:"authority__card"},r.a.createElement("div",{className:"authority__card__title mb-2"},"Notes"),r.a.createElement("div",{className:"mb-2"},K?K.map(function(e,t){return r.a.createElement("div",null,e.note)}):null),r.a.createElement("textarea",{onChange:function(e){M(e.target.value)},value:q,className:"w-100 general__mobile__input mb-2",style:{minHeight:"140px"}}),r.a.createElement($.a,{onClick:function(){return ie()},className:"w-100"},"Save")))),r.a.createElement(ze.a,null,r.a.createElement(Ge.a,{lg:7},r.a.createElement("div",{className:"authority__card mb-3 p-0"},r.a.createElement("div",{className:"mb-3 p-3 d-flex justify-content-between"},r.a.createElement("div",{className:"authority__card__title"},"Assigned Agents"),r.a.createElement($.a,{onClick:function(){te(!0)},variant:"primary"},"Add Agents")),r.a.createElement("table",{className:"assigned__agents__table"},r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Type")),r.a.createElement("tbody",null,w.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.first_name," ",e.last_name),r.a.createElement("td",null,e.type))}))))),r.a.createElement(Ge.a,{lg:5},r.a.createElement("div",{className:"authority__card mb-3 p-0"},r.a.createElement("div",{className:"d-flex justify-content-between p-3 mb-3"},r.a.createElement("div",{className:"authority__card__title"},"Evidence Files")),r.a.createElement("table",{className:"assigned__agents__table"},r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Extension")),r.a.createElement("tbody",null,I.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.type))}))))))):D?r.a.createElement("div",{className:"authority__card"},r.a.createElement(dt,{formType:a,id:c})):r.a.createElement(ut.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")))}function bt(){var e=Object(o.g)(),t=(Object(o.f)().pathname.split("/")[1],Object(n.useState)([])),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("authorities/chat_rooms");case 2:t=e.sent,l(t.data.data),console.log(t.data.data);case 5:case"end":return e.stop()}},e)}))()},[]),console.log("chatList",c);var s=c.map(function(t){return r.a.createElement("div",{className:"messages__row__container",key:t.id,onClick:function(a){e("chatroom/".concat(t.id))}},r.a.createElement("div",{className:"messages__row__avatar"},"# ",t.id),r.a.createElement("div",{className:"messages__row__right"},r.a.createElement("div",{className:"messages__row__label"},"".concat(t.agent_name)),r.a.createElement("div",{className:"messages__row__message"},t.description)))});return r.a.createElement("div",{className:"dashboard__container"},r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("h1",{className:"general__mobile__title mx-3",style:{fontSize:"1.35rem"}},"Chat Rooms")),s)}function ft(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),m=s[0],d=s[1],b=Object(o.g)(),f=Object(n.useState)({page:1,perPage:0,total:0}),g=Object(i.a)(f,2),E=g[0],v=g[1],h=Object(u.c)(function(e){return e.userInfo.value});Object(n.useEffect)(function(){try{ce.subscribe("private-agent-chat.".concat(y)).bind("message",function(e){var t,a;console.log("I got called"),t=e.user.name,a=e.chatMessage.message,c(function(e){return[{user_id:t,message:a}].concat(Object(rt.a)(e))})}),console.log(ce)}catch(e){console.log(e),b("/")}return function(){ce&&ce.unsubscribe("chat.".concat(y))}},[]);var y=Object(o.i)().chatroom_id;function N(){return(N=Object(p.a)(_.a.mark(function e(){var t,n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(se.a)({},E,{page:E.page+1}),e.prev=1,e.next=4,x(y,t);case 4:n=(n=e.sent).data.data,console.log(n),c([].concat(Object(rt.a)(a),Object(rt.a)(n.data))),v({page:n.current_page,perPage:n.per_page,total:n.total}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(y);case 3:t=(t=e.sent).data.data,console.log(t),c(t.data),v({page:t.current_page,perPage:t.per_page,total:t.total}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}))()},[]),r.a.createElement("div",{className:"dashboard__container d-flex flex-column"},r.a.createElement("div",{className:"chatroom__header__container d-flex justify-content-between align-items-center"},r.a.createElement("i",{onClick:function(){return b(-1)},style:{fontSize:"1.15rem"},class:"bi bi-chevron-left"}),r.a.createElement("h1",{className:"general__mobile__title mb-0",style:{"font-size":"1.35rem"}},"Authority Chatroom ",y),r.a.createElement("div",null)),r.a.createElement("div",{className:"chatroom__container pb-0"},r.a.createElement("div",{id:"scrollableDiv",style:{overflow:"scroll",display:"flex",flexDirection:"column",flex:"1"}},r.a.createElement(ct.a,{dataLength:a.length,next:function(){return N.apply(this,arguments)},className:"chat__room__container",style:{display:"flex",flexDirection:"column-reverse"},hasMore:a.length<E.total,loader:r.a.createElement("h4",null,"Loading..."),scrollableTarget:"scrollableDiv",inverse:!0},a.map(function(e,t){return r.a.createElement("div",{className:e.user_id===h.id?"message__right__side":"message__left__side",key:t},r.a.createElement("div",{className:e.user_id===h.id?"d-none":"message__username__label"},e.user_name,":"),"".concat(e.message))})))),r.a.createElement(le.a,{style:{padding:"12px"},onSubmit:function(e){e.preventDefault(),M(y,{message:m})}},r.a.createElement(le.a.Group,{className:"d-flex align-items-center",controlId:"formBasicPassword"},r.a.createElement(le.a.Control,{required:!0,type:"text",className:"chat__message__input",placeholder:"Enter your Msg here",value:m,onChange:function(e){d(e.target.value)}}),r.a.createElement($.a,{type:"submit",className:"message__send__button"},r.a.createElement("i",{class:"bi bi-send-fill"})))))}function gt(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),s=Object(i.a)(l,2),o=(s[0],s[1]);Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:t=e.sent,c(t.data.data),console.log(t.data.data),o(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))()},[]);return r.a.createElement(r.a.Fragment,null,a?r.a.createElement("div",{className:"emergency__assignment__container"},r.a.createElement("div",{className:"text-center mb-4"},r.a.createElement("h1",{className:"general__mobile__title mx-3",style:{"font-size":"1.35rem"}},"Current Assignment")),r.a.createElement("div",{className:"media__area__container mb-3"},a&&a.files&&a.files.length>0?a.files.map(function(e,t){return a=e.url,/\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(a)?r.a.createElement("div",{className:"media__content__holder d-flex justify-content-center",key:t},r.a.createElement("img",{src:"https://api.bashar.rocks/api/"+e.url,className:"h-100"})):function(e){return/\.(mp4|mov|wmv|avi|mkv|webm|flv)$/.test(e)}(e.url)?r.a.createElement("div",{className:"media__content__holder d-flex justify-content-center",key:t},r.a.createElement("video",{autoPlay:!0,loop:!0,controls:!0,src:"https://api.bashar.rocks/api/"+e.url,className:"h-100"})):function(e){return/\.(m4a|flac|mp3|wav|wma|aac)$/.test(e)}(e.url)?r.a.createElement("div",{className:"media__content__holder d-flex flex-column align-items-center pb-2 justify-content-between",key:t},r.a.createElement("div",null),r.a.createElement("i",{style:{fontSize:"4rem"},className:"bi bi-volume-up-fill"}),r.a.createElement("audio",{autoPlay:!0,loop:!0,controls:!0,src:"https://api.bashar.rocks/api/"+e.url})):void 0;var a}):null," "),a?r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__type__label mb-4"},a.emergency_type),r.a.createElement("div",{className:"mb-3 d-flex align-items-start"},r.a.createElement("div",{className:"emergency__info__icon"},r.a.createElement("i",{className:"bi bi-file-earmark-text-fill"})),r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__info__label"},"Description"),r.a.createElement("div",null," ",a.description))),r.a.createElement("div",{className:"mb-3 d-flex align-items-start"},r.a.createElement("div",{className:"emergency__info__icon"},r.a.createElement("i",{className:"bi bi-person-fill"})),r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__info__label"},"Reported By"),r.a.createElement("div",null," ",a.reported_by))),r.a.createElement("div",{className:"mb-3 d-flex align-items-start"},r.a.createElement("div",{className:"emergency__info__icon"},r.a.createElement("i",{className:"bi bi-telephone-fill"})),r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__info__label"},"Phone Number"),r.a.createElement("div",null," ",a.phone_number))),r.a.createElement("div",{className:"mb-3 d-none align-items-start"},r.a.createElement("div",{className:"emergency__info__icon"},r.a.createElement("i",{className:"bi bi-geo-alt-fill"})),r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__info__label"},"Event Location"),r.a.createElement("div",null,a.latitude," lat -"," ",a.longitude," long"))),r.a.createElement("div",{className:"mb-3 d-flex align-items-start"},r.a.createElement("div",{className:"emergency__info__icon"},r.a.createElement("i",{className:"bi bi-stickies-fill"})),r.a.createElement("div",null,r.a.createElement("div",{className:"emergency__info__label"},"Notes"),r.a.createElement("div",null,a.notes&&a.notes.length>0?a.notes.map(function(e,t){return r.a.createElement("div",{key:t},e.note)}):"-"))),r.a.createElement("div",{className:"d-flex justify-content-center text-center"},r.a.createElement("a",{className:"emergency__map__link",href:"https://maps.google.com/?q=".concat(a.latitude,",").concat(a.longitude),target:"_blank"},"Go to Map"))):null):r.a.createElement("div",{className:"emergency__assignment__container text-center d-flex flex-column justify-content-center mx-4"},r.a.createElement("img",{className:"unassigned__agent__image",src:"https://img.freepik.com/free-vector/reading-book-concept-illustration_114360-8612.jpg?t=st=1656281106~exp=1656281706~hmac=836798acd3586ee2d9979723a6fbbb06365000184a6f442515eda2b13a888534&w=1380",alt:""}),r.a.createElement("h1",{className:"general__mobile__title",style:{"font-size":"1.25rem"}},"Agent Not Assigned"),r.a.createElement("p",{className:"general__mobile__subtitle"},"Agent is currently not assigned to do any task")))}function Et(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=(t[0],t[1]),c=Object(o.g)(),l=Object(o.h)(),s=Object(i.a)(l,2),m=s[0],d=s[1],b=Object(n.useState)([]),f=Object(i.a)(b,2),g=f[0],E=f[1],v=Object(u.b)(),h=Object(n.useState)(!1),y=Object(i.a)(h,2),N=y[0];y[1];function j(){return(j=Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:return t=e.sent,e.next=6,P(t.data.data.fileName);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){Object(p.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,a(t.data.data.map(function(e,t){return console.log(e),r.a.createElement(ee.a.Link,{key:t,onClick:function(){d(e.name)}},"".concat(e.name))}));case 4:case"end":return e.stop()}},e)}))()},[]),r.a.createElement("div",{className:"dashboard__container"},r.a.createElement("div",{className:"authority__card card__height"},r.a.createElement("div",{className:"d-flex align-items-center mb-3 justify-content-between"},r.a.createElement("div",{className:"authority__card__title"},m?m.toUpperCase():null),r.a.createElement("div",null,r.a.createElement($.a,{onClick:function(){return j.apply(this,arguments)}},"Backup DB"),"available-agents"===m?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{style:{marginLeft:"8px",marginRight:"8px"},onClick:function(e){c("form/".concat(m,"/create_form"))}},"Create"),r.a.createElement($.a,{onClick:function(){var e=Object(p.a)(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(m,g);case 3:e.sent,v(he()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("delete operation failed",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},"Delete")," "))),m&&r.a.createElement(it,{table_name:m,selectedRows:g,setSelectedRows:E})),r.a.createElement(_t.a,{show:N,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(_t.a.Header,{closeButton:!0},r.a.createElement(_t.a.Title,{id:"contained-modal-title-vcenter"},"Backup Status")),r.a.createElement(_t.a.Body,null,r.a.createElement("h4",null,"Centered Modal"),r.a.createElement("p",null,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.")),r.a.createElement(_t.a.Footer,null,r.a.createElement($.a,null,"Close"))))}function vt(){var e=Object(o.i)(),t=e.formType,a=e.id;return r.a.createElement("div",{className:"authority__form__container"},r.a.createElement("div",{className:"authority__card"},r.a.createElement("h3",null,t),r.a.createElement(dt,{formType:t,id:a})))}var ht=function(){return Object(n.useEffect)(function(){console.log("App rerendered")},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{basename:"/emergency-frontend"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",element:r.a.createElement(st,null)},r.a.createElement(o.b,{index:!0,element:r.a.createElement(Oe,null)}),r.a.createElement(o.b,{path:"login",element:r.a.createElement(Oe,null)}),r.a.createElement(o.b,{path:"register",element:r.a.createElement(Se,null)}),r.a.createElement(o.b,{path:"user/sms-verify/:request_id/:id",element:r.a.createElement(Re,null)}),r.a.createElement(o.b,{path:"user",element:r.a.createElement(Fe,null)},r.a.createElement(o.b,{index:!0,element:r.a.createElement(Pe,null)}),r.a.createElement(o.b,{path:"profile",element:r.a.createElement(ke,null)}),r.a.createElement(o.b,{path:"call-help",element:r.a.createElement(nt,null)}),r.a.createElement(o.b,{path:"chat",element:r.a.createElement(we,null)}),r.a.createElement(o.b,{path:"chat/chatroom/:chatroom_id",element:r.a.createElement(lt,null)}),r.a.createElement(o.b,{path:"*",element:r.a.createElement(xe,null)})),r.a.createElement(o.b,{path:"agent",element:r.a.createElement(te,null)},r.a.createElement(o.b,{index:!0,element:r.a.createElement(gt,null)}),r.a.createElement(o.b,{path:"profile",element:r.a.createElement(ke,null)}),r.a.createElement(o.b,{path:"report",element:r.a.createElement(Pe,null)}),r.a.createElement(o.b,{path:"chat",element:r.a.createElement(we,null)}),r.a.createElement(o.b,{path:"chat/chatroom/:chatroom_id",element:r.a.createElement(lt,null)}),r.a.createElement(o.b,{path:"*",element:r.a.createElement(xe,null)})),r.a.createElement(o.b,{path:"authority",element:r.a.createElement(re,null)},r.a.createElement(o.b,{index:!0,element:r.a.createElement(mt,null)}),r.a.createElement(o.b,{path:"form/:formType/:id",element:r.a.createElement(pt,null)}),r.a.createElement(o.b,{path:"chatList",element:r.a.createElement(bt,null)}),r.a.createElement(o.b,{path:"chatList/chatroom/:chatroom_id",element:r.a.createElement(ft,null)})),r.a.createElement(o.b,{path:"admin",element:r.a.createElement(K,null)},r.a.createElement(o.b,{index:!0,element:r.a.createElement(Et,null)}),r.a.createElement(o.b,{path:"form/:formType/:id",element:r.a.createElement(vt,null)})),r.a.createElement(o.b,{path:"*",element:r.a.createElement(xe,null)})))))},yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Nt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(246);var jt=a(243),Ot=a.n(jt),xt=a(42),wt=a(60),kt={key:"root",storage:Ot.a},St=Object(xt.b)({errorInfo:fe,userInfo:_e,successInfo:ye}),Ct=Object(wt.g)(kt,St),It=Object(oe.a)({reducer:Ct,middleware:function(e){return e({serializableCheck:{ignoredActions:[wt.a,wt.f,wt.b,wt.c,wt.d,wt.e]}})}}),Tt=a(244),Bt=Object(wt.h)(It);l.a.render(r.a.createElement(u.a,{store:It},r.a.createElement(Tt.a,{persistor:Bt},r.a.createElement(ht,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/emergency-frontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/emergency-frontend","/service-worker.js");yt?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Nt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):Nt(t,e)})}}()}},[[185,2,1]]]);
//# sourceMappingURL=main.2220b053.chunk.js.map